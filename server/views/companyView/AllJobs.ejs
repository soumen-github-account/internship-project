<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Jobs</title>
    <link rel="stylesheet" href="/css/style.css">
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-solid-rounded/css/uicons-solid-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-solid-rounded/css/uicons-solid-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-solid-straight/css/uicons-solid-straight.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-solid-rounded/css/uicons-solid-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-solid-rounded/css/uicons-solid-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-solid-straight/css/uicons-solid-straight.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
  <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/3.0.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>

</head>

<body class="bg-gray-50 min-h-screen p-6">

  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold text-gray-800">
      All Jobs
    </h2>

    <span class="text-sm text-gray-600">
      Total Jobs: <strong><%= count %></strong>
    </span>
  </div>

  <% if (jobs.length === 0) { %>
    <!-- Empty State -->
    <div class="bg-white p-8 rounded-xl text-center shadow">
      <p class="text-gray-500">No jobs posted yet.</p>
    </div>
  <% } else { %>

  <!-- Jobs Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">

    <% jobs.forEach(job => { %>

      <div class="bg-white rounded-2xl shadow hover:shadow-lg transition p-5 flex flex-col">

        <!-- Company -->
        <div class="flex items-center gap-3 mb-4">
          <img
            src="<%= job.companyLogo || 'https://via.placeholder.com/48' %>"
            alt="logo"
            class="w-12 h-12 rounded-full object-cover border"
          />

          <div>
            <h3 class="font-semibold text-gray-800">
              <%= job.title %>
            </h3>
            <p class="text-sm text-gray-500">
              <%= job.companyName %> â€¢ <%= job.companyType %>
            </p>
          </div>
        </div>

        <!-- Job Info -->
        <div class="space-y-2 text-[15px] text-gray-600">
          <span class="flex items-center gap-2"><i class="fi fi-sr-map-pin"></i> <p><%= job.location %></p></span>
          <span class="flex items-center gap-2"><i class="fi fi-sr-clock-three"></i> <p>Duration: <%= job.duration %></p></span>
          <span class="flex items-center gap-2"><i class="fi fi-ss-briefcase"></i> <p>Type: <%= job.jobType %></p></span>
          <span class="flex items-center gap-2"><i class="fi fi-sr-usd-circle"></i> <p>Stipend: <%= job.stipend %></p></span>
        </div>

        <!-- Skills -->
        <% if (job.skillsRequired?.length) { %>
          <div class="flex flex-wrap gap-2 mt-4">
            <% job.skillsRequired.slice(0,4).forEach(skill => { %>
              <span class="px-3 py-1 bg-pink-50 text-pink-600 text-sm rounded-full">
                <%= skill %>
              </span>
            <% }) %>
          </div>
        <% } %>

        <!-- Stats -->
        <div class="flex justify-between mt-4 text-sm text-gray-500">
          <span class="flex items-center gap-2"><i class="fi fi-sr-users"></i> <p>Applicants: <%= job.applicants %></p></span>
          <span class="flex items-center gap-2"><i class="fi fi-ss-thumbtack"></i> <p>Openings: <%= job.openings %></p></span>
        </div>

        <!-- Actions -->
        <div class="mt-5 flex gap-3">
          <a
            href="/company/jobs/<%= job.jobId %>/edit"
            class="flex w-full items-center justify-center py-2 gap-2 text-md rounded-lg border border-pink-600 text-pink-600 hover:bg-pink-600 hover:text-white transition"
          >
            <i class="fi fi-rr-edit"></i> <p>Edit</p>
          </a>

          <form
            action="/company/jobs/<%= job.jobId %>/delete"
            method="POST"
            onsubmit="return confirm('Are you sure you want to delete this job?');"
          >
            <button
              type="submit"
              class="flex w-full gap-2 px-5 py-2 text-sm rounded-lg border border-red-500 text-red-500 hover:bg-red-500 hover:text-white transition"
            >
              <i class="fi fi-rr-trash-can-list"></i> Delete
            </button>
          </form>

        </div>

      </div>

    <% }) %>

  </div>

  <% } %>

</body>
</html>
